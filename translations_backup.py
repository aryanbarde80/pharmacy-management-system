from flask import session, request

# Translation dictionaries
_translations = {
    'en': {
        # Navigation
        'dashboard': 'Dashboard',
        'medicines': 'Medicines',
        'orders': 'Orders',
        'inventory': 'Inventory',
        'suppliers': 'Suppliers',
        'reports': 'Reports',
        'contact': 'Contact',
        'search_placeholder': 'Search...',
        'notifications': 'Notifications',
        'logout': 'Logout',
        
        # Dashboard
        'welcome': 'Welcome back',
        'welcome_subtitle': 'Here\'s a snapshot of your pharmacy today',
        'new_order': 'New Order',
        'total_sales': 'Total Sales',
        'total_orders': 'Total Orders',
        'low_stock': 'Low Stock Alerts',
        'expiring_soon': 'Expiring Soon',
        'recent_orders': 'Recent Orders',
        'view_all': 'View All',
        'order_id': 'Order ID',
        'customer': 'Customer',
        'date': 'Date',
        'amount': 'Amount',
        'status': 'Status',
        'completed': 'Completed',
        'pending': 'Pending',
        'cancelled': 'Cancelled',
        
        # Login Page
        'sign_in': 'Sign In',
        'signing_in': 'Signing in',
        'email_address': 'Email Address',
        'password': 'Password',
        'remember_me': 'Remember me',
        'forgot_password': 'Forgot password?',
        'dont_have_account': "Don't have an account?",
        'sign_up': 'Sign Up',
        'show': 'Show',
        'hide': 'Hide',
        'invalid_email': 'Please enter a valid email address',
        'invalid_credentials': 'Invalid email or password',
        'login_error': 'An error occurred. Please try again.',
        'user_not_found': 'No account found with this email',
        'wrong_password': 'Incorrect password',
        'account_disabled': 'This account has been disabled',
        'sign_in_to_continue': 'Sign in to continue',
        'email_placeholder': 'you@example.com',
        'all_rights_reserved': 'All rights reserved',
        'pharmacy_management': 'Pharmacy Management Dashboard',
        'search_placeholder': 'Search...',
        'notifications': 'Notifications',
        'profile': 'Profile',
        'settings': 'Settings',
        'logout': 'Logout',
        'dashboard': 'Dashboard',
        'medicines': 'Medicines',
        'orders': 'Orders',
        'inventory': 'Inventory',
        'suppliers': 'Suppliers',
        'reports': 'Reports',
        'contact': 'Contact',
        'view_profile': 'View profile',
        'visitor': 'Visitor',
        'active_prescriptions': 'Active prescriptions',
        'revenue_overview': 'Revenue overview',
        'last_6_months': 'Last 6 months',
        'monthly': 'Monthly',
        'weekly': 'Weekly',
        'revenue': 'Revenue',
        'currency': 'DZD',
        'manage_medicines': 'Manage your pharmacy medicines inventory',
        'export': 'Export',
        'add_medicine': 'Add Medicine',
        'search_medicines': 'Search medicines...',
        'all_categories': 'All categories',
        'all_statuses': 'All statuses',
        'available': 'Available',
        'low_stock': 'Low stock',
        'out_of_stock': 'Out of stock',
        'more_filters': 'More filters',
        'medicine': 'Medicine',
        'category': 'Category',
        'stock': 'Stock',
        'price': 'Price',
        'status': 'Status',
        'actions': 'Actions',
        'unnamed': 'Unnamed',
        'edit': 'Edit',
        'delete': 'Delete',
        'no_medicines': 'No medicines to display',
        'total_medicines': 'Total medicines',
        'in_stock': 'In stock',
        'antibiotics': 'Antibiotics',
        'pain_relievers': 'Pain Relievers',
        'vitamins': 'Vitamins',
        'supplements': 'Supplements',
        'dinars': 'DZD',
        'manage_orders': 'Manage and track customer orders',
        'new_order': 'New Order',
        'total_orders': 'Total Orders',
        'pending': 'Pending',
        'processing': 'Processing',
        'shipped': 'Shipped',
        'delivered': 'Delivered',
        'cancelled': 'Cancelled',
        'this_month': 'This Month',
        'average_order_value': 'Average Order Value',
        'search_orders': 'Search orders...',
        'all_statuses': 'All statuses',
        'all_periods': 'All periods',
        'today': 'Today',
        'this_week': 'This week',
        'this_month': 'This month',
        'last_30_days': 'Last 30 days',
        'order': 'Order',
        'customer': 'Customer',
        'date': 'Date',
        'items': 'Items',
        'total': 'Total',
        'status': 'Status',
        'actions': 'Actions',
        'view': 'View',
        'print': 'Print',
        'more': 'More',
        'no_orders': 'No orders to display',
        'showing': 'Showing',
        'to': 'to',
        'of': 'of',
        'results': 'results',
        'manage_inventory': 'Manage pharmacy inventory and stock levels',
        'create_order': 'Create Order',
        'stock_check': 'Stock Check',
        'add_item': 'Add Item',
        'total_items': 'Total items',
        'active_items': 'Active Items',
        'low_stock': 'Low stock',
        'critical': 'Critical',
        'out_of_stock': 'Out of stock',
        'on_order': 'On Order',
        'inventory_value': 'Inventory value',
        'search_inventory': 'Search inventory...',
        'first_aid': 'First Aid',
        'in_stock': 'In stock',
        'low_quantity': 'Low quantity',
        'item': 'Item',
        'category': 'Category',
        'stock': 'Stock',
        'price': 'Price',
        'value': 'Value',
        'minimum': 'Minimum',
        'edit': 'Edit',
        'delete': 'Delete',
        'view': 'View',
        'no_items': 'No items to display',
        'suppliers': 'Suppliers',
        'manage_suppliers': 'Manage your pharmacy suppliers and vendors',
        'add_supplier': 'Add Supplier',
        'total_suppliers': 'Total suppliers',
        'active_orders': 'Active orders',
        'expenses_this_month': 'Expenses this month',
        'average_delivery_time': 'Average delivery time',
        'days': 'days',
        'search_suppliers': 'Search suppliers...',
        'all_categories': 'All categories',
        'medical_supplies': 'Medical supplies',
        'equipment': 'Equipment',
        'otc_products': 'OTC products',
        'all_statuses': 'All statuses',
        'active': 'Active',
        'inactive': 'Inactive',
        'temporarily_suspended': 'Temporarily suspended',
        'more_filters': 'More filters',
        'contact': 'Contact',
        'location': 'Location',
        'email': 'Email',
        'phone': 'Phone',
        'view': 'View',
        'edit': 'Edit',
        'delete': 'Delete',
        'no_suppliers': 'No suppliers to display at the moment',
        'total_suppliers_count': 'Total Suppliers',
        'reports': 'Reports',
        'reports_description': 'Generate and analyze pharmacy performance reports',
        'export': 'Export',
        'new_report': 'New report',
        'report_type': 'Report type',
        'time_range': 'Time range',
        'category': 'Category',
        'generate_report': 'Generate report',
        'report': 'Report',
        'type': 'Type',
        'period': 'Period',
        'created_at': 'Created At',
        'actions': 'Actions',
        'view': 'View',
        'download': 'Download',
        'no_reports': 'No reports to display at the moment',
        'total_reports': 'Total Reports',
        'sales_report': 'Sales report',
        'inventory_report': 'Inventory report',
        'expiry_report': 'Expiry report',
        'supplier_performance': 'Supplier performance',
        'customer_purchase_log': 'Customer purchase log',
        'last_7_days': 'Last 7 days',
        'this_month': 'This month',
        'last_month': 'Last month',
        'this_quarter': 'This quarter',
        'this_year': 'This year',
        'custom_range': 'Custom range',
        'all_categories': 'All categories',
        'prescriptions': 'Prescriptions',
        'non_prescription': 'Non-prescription',
        'medical_supplies': 'Medical supplies',
        'equipment': 'Equipment',
    },
    'ar': {
        # Navigation
        'dashboard': 'الرئيسية',
        'medicines': 'الأدوية',
        'orders': 'الطلبات',
        'inventory': 'المخزون',
        'suppliers': 'الموردون',
        'reports': 'التقارير',
        'contact': 'اتصل بنا',
        'search_placeholder': 'بحث...',
        'notifications': 'الإشعارات',
        'logout': 'تسجيل خروج',
        
        # Dashboard
        'welcome': 'مرحباً بعودتك',
        'welcome_subtitle': 'هذه نظرة عامة على صيدليتك اليوم',
        'new_order': 'طلب جديد',
        'total_sales': 'إجمالي المبيعات',
        'total_orders': 'إجمالي الطلبات',
        'low_stock': 'تنبيهات المخزون المنخفض',
        'expiring_soon': 'تنتهي صلاحيتها قريباً',
        'recent_orders': 'الطلبات الحديثة',
        'view_all': 'عرض الكل',
        'order_id': 'رقم الطلب',
        'customer': 'العميل',
        'date': 'التاريخ',
        'amount': 'المبلغ',
        'status': 'الحالة',
        'completed': 'مكتمل',
        'pending': 'قيد الانتظار',
        'cancelled': 'ملغي',
        
        # Login Page
        'sign_in': 'تسجيل الدخول',
        'signing_in': 'جاري تسجيل الدخول',
        'email_address': 'البريد الإلكتروني',
        'password': 'كلمة المرور',
        'remember_me': 'تذكرني',
        'forgot_password': 'نسيت كلمة المرور؟',
        'dont_have_account': 'ليس لديك حساب؟',
        'sign_up': 'إنشاء حساب',
        'show': 'إظهار',
        'hide': 'إخفاء',
        'invalid_email': 'الرجاء إدخال بريد إلكتروني صحيح',
        'invalid_credentials': 'البريد الإلكتروني أو كلمة المرور غير صحيحة',
        'login_error': 'حدث خطأ. يرجى المحاولة مرة أخرى.',
        'user_not_found': 'لا يوجد حساب مسجل بهذا البريد الإلكتروني',
        'wrong_password': 'كلمة المرور غير صحيحة',
        'account_disabled': 'هذا الحساب معطل',
        'sign_in_to_continue': 'تسجيل الدخول للمتابعة',
        'email_placeholder': 'البريد الإلكتروني',
        'all_rights_reserved': 'جميع الحقوق محفوظة',
        'pharmacy_management': 'لوحة تحكم إدارة الصيدلية',
        'search_placeholder': 'بحث...',
        'notifications': 'الإشعارات',
        'profile': 'الملف الشخصي',
        'settings': 'الإعدادات',
        'logout': 'تسجيل الخروج',
        'dashboard': 'لوحة التحكم',
        'medicines': 'الأدوية',
        'orders': 'الطلبات',
        'inventory': 'المخزون',
        'suppliers': 'الموردون',
        'reports': 'التقارير',
        'contact': 'اتصل بنا',
        'view_profile': 'عرض الملف الشخصي',
        'visitor': 'زائر',
        'active_prescriptions': 'الوصفات النشطة',
        'revenue_overview': 'نظرة عامة على الإيرادات',
        'last_6_months': 'آخر 6 أشهر',
        'monthly': 'شهرياً',
        'weekly': 'أسبوعياً',
        'revenue': 'الإيرادات',
        'currency': 'دج',
        'manage_medicines': 'إدارة مخزون أدوية الصيدلية',
        'export': 'تصدير',
        'add_medicine': 'إضافة دواء',
        'search_medicines': 'بحث الأدوية...',
        'all_categories': 'جميع الفئات',
        'all_statuses': 'جميع الحالات',
        'available': 'متوفر',
        'low_stock': 'مخزون منخفض',
        'out_of_stock': 'غير متوفر',
        'more_filters': 'المزيد من الفلاتر',
        'medicine': 'الدواء',
        'category': 'الفئة',
        'stock': 'المخزون',
        'price': 'السعر',
        'status': 'الحالة',
        'actions': 'الإجراءات',
        'unnamed': 'غير مسمى',
        'edit': 'تعديل',
        'delete': 'حذف',
        'no_medicines': 'لا توجد أدوية للعرض',
        'total_medicines': 'إجمالي الأدوية',
        'in_stock': 'متوفر في المخزون',
        'antibiotics': 'المضادات الحيوية',
        'pain_relievers': 'مسكنات الألم',
        'vitamins': 'فيتامينات',
        'supplements': 'مكملات غذائية',
        'dinars': 'دج',
        'manage_orders': 'إدارة وتتبع طلبات العملاء',
        'new_order': 'طلب جديد',
        'total_orders': 'إجمالي الطلبات',
        'pending': 'قيد الانتظار',
        'processing': 'قيد المعالجة',
        'shipped': 'تم الشحن',
        'delivered': 'تم التوصيل',
        'cancelled': 'ملغي',
        'this_month': 'هذا الشهر',
        'average_order_value': 'متوسط قيمة الطلب',
        'search_orders': 'بحث في الطلبات...',
        'all_statuses': 'جميع الحالات',
        'all_periods': 'جميع الفترات',
        'today': 'اليوم',
        'this_week': 'هذا الأسبوع',
        'this_month': 'هذا الشهر',
        'last_30_days': 'آخر 30 يوم',
        'order': 'الطلب',
        'customer': 'العميل',
        'date': 'التاريخ',
        'items': 'العناصر',
        'total': 'الإجمالي',
        'status': 'الحالة',
        'actions': 'الإجراءات',
        'view': 'عرض',
        'print': 'طباعة',
        'more': 'المزيد',
        'no_orders': 'لا توجد طلبات للعرض',
        'showing': 'عرض',
        'to': 'إلى',
        'of': 'من',
        'results': 'نتيجة',
        'manage_inventory': 'إدارة مخزون الصيدلية ومستوياته',
        'create_order': 'إنشاء طلب',
        'stock_check': 'فحص المخزون',
        'add_item': 'إضافة عنصر',
        'total_items': 'إجمالي العناصر',
        'active_items': 'العناصر النشطة',
        'low_stock': 'مخزون منخفض',
        'critical': 'حرج',
        'out_of_stock': 'غير متوفر',
        'on_order': 'قيد الطلب',
        'inventory_value': 'قيمة المخزون',
        'search_inventory': 'بحث في المخزون...',
        'first_aid': 'إسعافات أولية',
        'in_stock': 'متوفر في المخزون',
        'low_quantity': 'كمية منخفضة',
        'item': 'العنصر',
        'category': 'الفئة',
        'stock': 'المخزون',
        'price': 'السعر',
        'value': 'القيمة',
        'minimum': 'الحد الأدنى',
        'edit': 'تعديل',
        'delete': 'حذف',
        'view': 'عرض',
        'no_items': 'لا توجد عناصر للعرض',
        'suppliers': 'الموردون',
        'manage_suppliers': 'إدارة موردي ومزودي الصيدلية',
        'add_supplier': 'إضافة مورد',
        'total_suppliers': 'إجمالي الموردين',
        'active_orders': 'الطلبات النشطة',
        'expenses_this_month': 'المصروفات الشهرية',
        'average_delivery_time': 'متوسط وقت التوصيل',
        'days': 'أيام',
        'search_suppliers': 'بحث في الموردين...',
        'all_categories': 'جميع الفئات',
        'medical_supplies': 'المستلزمات الطبية',
        'equipment': 'المعدات',
        'otc_products': 'منتجات بدون وصفة طبية',
        'all_statuses': 'جميع الحالات',
        'active': 'نشط',
        'inactive': 'غير نشط',
        'temporarily_suspended': 'موقوف مؤقتاً',
        'more_filters': 'المزيد من الفلاتر',
        'contact': 'الاتصال',
        'location': 'الموقع',
        'email': 'البريد الإلكتروني',
        'phone': 'الهاتف',
        'view': 'عرض',
        'edit': 'تعديل',
        'delete': 'حذف',
        'no_suppliers': 'لا توجد موردين متاحين حالياً',
        'total_suppliers_count': 'إجمالي الموردين',
        'reports': 'التقارير',
        'reports_description': 'إنشاء وتحليل تقارير أداء الصيدلية',
        'export': 'تصدير',
        'new_report': 'تقرير جديد',
        'report_type': 'نوع التقرير',
        'time_range': 'الفترة الزمنية',
        'category': 'الفئة',
        'generate_report': 'إنشاء تقرير',
        'report': 'التقرير',
        'type': 'النوع',
        'period': 'الفترة',
        'created_at': 'تاريخ الإنشاء',
        'actions': 'الإجراءات',
        'view': 'عرض',
        'download': 'تحميل',
        'no_reports': 'لا توجد تقارير متاحة حالياً',
        'total_reports': 'إجمالي التقارير',
        'sales_report': 'تقرير المبيعات',
        'inventory_report': 'تقرير المخزون',
        'expiry_report': 'تقرير انتهاء الصلاحية',
        'supplier_performance': 'أداء الموردين',
        'customer_purchase_log': 'سجل مشتريات العملاء',
        'last_7_days': 'آخر 7 أيام',
        'this_month': 'هذا الشهر',
        'last_month': 'الشهر الماضي',
        'this_quarter': 'هذا الربع',
        'this_year': 'هذه السنة',
        'custom_range': 'نطاق مخصص',
        'all_categories': 'جميع الفئات',
        'prescriptions': 'الوصفات الطبية',
        'non_prescription': 'بدون وصفة طبية',
        'medical_supplies': 'المستلزمات الطبية',
        'equipment': 'المعدات',
    }
}

def get_translation(key, lang=None):
    """Get translation for the given key in the specified language"""
    if lang is None:
        lang = session.get('language', 'en')
    return _translations.get(lang, {}).get(key, key)
